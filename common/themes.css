/* ===== テーマ定義 ===== */

/* White - クラシック白背景 */
[data-theme="white"] {
    --bg-primary: #f8f9fa;
    --bg-card: #ffffff;
    --bg-card-alt: #f1f3f5;
    --bg-badge: #e9ecef;
    --bg-progress: #dee2e6;
    --bg-input: #ffffff;
    --bg-hover: #e9ecef;
    --text-primary: #212529;
    --text-secondary: #495057;
    --text-muted: #6c757d;
    --color-elapsed: #198754;
    --color-remaining: #0d6efd;
    --color-overtime: #dc3545;
    --color-cost: #fd7e14;
    --color-estimate: #6f42c1;
    --color-link: #0d6efd;
    --color-link-hover: #0a58ca;
    --btn-start: #198754;
    --btn-start-hover: #157347;
    --btn-pause: #ffc107;
    --btn-pause-hover: #e0a800;
    --btn-stop: #dc3545;
    --btn-stop-hover: #bb2d3b;
    --btn-reset: #6c757d;
    --progress-gradient: linear-gradient(90deg, #198754, #20c997);
    --progress-over-gradient: linear-gradient(90deg, #dc3545, #f8d7da);
    --card-border: 1px solid #dee2e6;
    --card-radius: 8px;
    --font-display: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    --font-mono: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
    --border-color: #dee2e6;
    --accent-color: #0d6efd;
    --accent-rgb: 13, 110, 253;
    --danger-color: #dc3545;
    --warning-color: #fd7e14;
    --info-color: #0d6efd;
    --glow-effect: none;
    --scanline: none;
}

/* Dark - ダークブルー */
:root, [data-theme="dark"] {
    --bg-primary: #1a1a2e;
    --bg-card: #16213e;
    --bg-card-alt: #0f3460;
    --bg-badge: #2d3748;
    --bg-progress: #2d3748;
    --text-primary: #eee;
    --text-secondary: #888;
    --text-muted: #aaa;
    --color-elapsed: #4ade80;
    --color-remaining: #60a5fa;
    --color-overtime: #f87171;
    --color-cost: #fbbf24;
    --color-estimate: #a78bfa;
    --color-link: #60a5fa;
    --color-link-hover: #93c5fd;
    --btn-start: #22c55e;
    --btn-start-hover: #16a34a;
    --btn-pause: #f59e0b;
    --btn-pause-hover: #d97706;
    --btn-stop: #ef4444;
    --btn-stop-hover: #dc2626;
    --btn-reset: #6b7280;
    --progress-gradient: linear-gradient(90deg, #22c55e, #4ade80);
    --progress-over-gradient: linear-gradient(90deg, #ef4444, #f87171);
    --card-border: none;
    --card-radius: 12px;
    --font-display: 'Courier New', monospace;
    --glow-effect: none;
    --scanline: none;
}

/* Terminal Green - マトリックス風 */
[data-theme="terminal"] {
    --bg-primary: #0a0a0a;
    --bg-card: #0d1a0d;
    --bg-card-alt: #0a150a;
    --bg-badge: #1a2f1a;
    --bg-progress: #1a2f1a;
    --text-primary: #00ff41;
    --text-secondary: #00aa2a;
    --text-muted: #008822;
    --color-elapsed: #00ff41;
    --color-remaining: #00ffaa;
    --color-overtime: #ff3333;
    --color-cost: #00ff41;
    --color-estimate: #00cc33;
    --color-link: #00ff41;
    --color-link-hover: #88ff88;
    --btn-start: #00aa2a;
    --btn-start-hover: #00ff41;
    --btn-pause: #aaaa00;
    --btn-pause-hover: #ffff00;
    --btn-stop: #aa0000;
    --btn-stop-hover: #ff0000;
    --btn-reset: #444;
    --progress-gradient: linear-gradient(90deg, #00aa2a, #00ff41);
    --progress-over-gradient: linear-gradient(90deg, #aa0000, #ff3333);
    --card-border: 1px solid #00ff4133;
    --card-radius: 2px;
    --font-display: 'Courier New', monospace;
    --glow-effect: 0 0 10px #00ff4166;
    --scanline: repeating-linear-gradient(
        0deg,
        rgba(0, 255, 65, 0.03) 0px,
        rgba(0, 255, 65, 0.03) 1px,
        transparent 1px,
        transparent 2px
    );
}

/* NERV Orange - 警告システム風 */
[data-theme="nerv"] {
    --bg-primary: #0a0a0a;
    --bg-card: #1a0a00;
    --bg-card-alt: #1a0500;
    --bg-badge: #2a1500;
    --bg-progress: #2a1500;
    --text-primary: #ff6600;
    --text-secondary: #cc5500;
    --text-muted: #994400;
    --color-elapsed: #00ff00;
    --color-remaining: #ff6600;
    --color-overtime: #ff0000;
    --color-cost: #ffcc00;
    --color-estimate: #ff9900;
    --color-link: #ff6600;
    --color-link-hover: #ff9933;
    --btn-start: #00aa00;
    --btn-start-hover: #00ff00;
    --btn-pause: #ff6600;
    --btn-pause-hover: #ff9900;
    --btn-stop: #cc0000;
    --btn-stop-hover: #ff0000;
    --btn-reset: #333;
    --progress-gradient: linear-gradient(90deg, #ff6600, #ffcc00);
    --progress-over-gradient: linear-gradient(90deg, #cc0000, #ff0000);
    --card-border: 2px solid #ff660066;
    --card-radius: 0;
    --font-display: 'Courier New', monospace;
    --glow-effect: 0 0 15px #ff660044;
    --scanline: none;
}

/* Neon Cyber - ネオンサイバーパンク */
[data-theme="neon"] {
    --bg-primary: #0a0a14;
    --bg-card: #12121f;
    --bg-card-alt: #0f0f1a;
    --bg-badge: #1a1a2f;
    --bg-progress: #1a1a2f;
    --text-primary: #fff;
    --text-secondary: #00ffff;
    --text-muted: #ff00ff99;
    --color-elapsed: #00ffff;
    --color-remaining: #ff00ff;
    --color-overtime: #ff3366;
    --color-cost: #ffff00;
    --color-estimate: #00ffff;
    --color-link: #ff00ff;
    --color-link-hover: #ff66ff;
    --btn-start: #00cccc;
    --btn-start-hover: #00ffff;
    --btn-pause: #cc00cc;
    --btn-pause-hover: #ff00ff;
    --btn-stop: #cc0033;
    --btn-stop-hover: #ff3366;
    --btn-reset: #333355;
    --progress-gradient: linear-gradient(90deg, #00ffff, #ff00ff);
    --progress-over-gradient: linear-gradient(90deg, #ff0066, #ff3366);
    --card-border: 1px solid #ff00ff44;
    --card-radius: 4px;
    --font-display: 'Courier New', monospace;
    --glow-effect: 0 0 20px #ff00ff33, 0 0 40px #00ffff22;
    --scanline: none;
}

/* Pop Pink - ポップかわいいピンク */
[data-theme="pink"] {
    --bg-primary: #fff0f5;
    --bg-card: #ffe4ec;
    --bg-card-alt: #ffd6e0;
    --bg-badge: #ffb6c1;
    --bg-progress: #ffc0cb;
    --text-primary: #d63384;
    --text-secondary: #e75480;
    --text-muted: #f08080;
    --color-elapsed: #32cd32;
    --color-remaining: #ff69b4;
    --color-overtime: #dc143c;
    --color-cost: #ff1493;
    --color-estimate: #da70d6;
    --color-link: #ff69b4;
    --color-link-hover: #ff1493;
    --btn-start: #3cb371;
    --btn-start-hover: #2e8b57;
    --btn-pause: #ffa500;
    --btn-pause-hover: #ff8c00;
    --btn-stop: #dc143c;
    --btn-stop-hover: #b22222;
    --btn-reset: #dda0dd;
    --progress-gradient: linear-gradient(90deg, #ff69b4, #ff1493);
    --progress-over-gradient: linear-gradient(90deg, #dc143c, #ff6b6b);
    --card-border: 2px solid #ffb6c1;
    --card-radius: 20px;
    --font-display: 'Arial Rounded MT Bold', 'Rounded Mplus 1c', sans-serif;
    --glow-effect: none;
    --scanline: none;
}

/* Pop Aqua - ポップかわいい水色 */
[data-theme="aqua"] {
    --bg-primary: #f0ffff;
    --bg-card: #e0ffff;
    --bg-card-alt: #d0f0f0;
    --bg-badge: #afeeee;
    --bg-progress: #b0e0e6;
    --text-primary: #008b8b;
    --text-secondary: #20b2aa;
    --text-muted: #5f9ea0;
    --color-elapsed: #3cb371;
    --color-remaining: #00ced1;
    --color-overtime: #ff6347;
    --color-cost: #ff8c00;
    --color-estimate: #48d1cc;
    --color-link: #00ced1;
    --color-link-hover: #20b2aa;
    --btn-start: #3cb371;
    --btn-start-hover: #2e8b57;
    --btn-pause: #ffa500;
    --btn-pause-hover: #ff8c00;
    --btn-stop: #ff6347;
    --btn-stop-hover: #dc143c;
    --btn-reset: #b0c4de;
    --progress-gradient: linear-gradient(90deg, #00ced1, #48d1cc);
    --progress-over-gradient: linear-gradient(90deg, #ff6347, #ff7f50);
    --card-border: 2px solid #afeeee;
    --card-radius: 20px;
    --font-display: 'Arial Rounded MT Bold', 'Rounded Mplus 1c', sans-serif;
    --glow-effect: none;
    --scanline: none;
}

/* Midnight Purple - 深夜のパープル */
[data-theme="midnight"] {
    --bg-primary: #13111c;
    --bg-card: #1e1a2e;
    --bg-card-alt: #2a2440;
    --bg-badge: #3d3557;
    --bg-progress: #3d3557;
    --text-primary: #e0d4f7;
    --text-secondary: #b8a9d9;
    --text-muted: #8b7cb3;
    --color-elapsed: #a855f7;
    --color-remaining: #c084fc;
    --color-overtime: #f472b6;
    --color-cost: #fbbf24;
    --color-estimate: #c084fc;
    --color-link: #a855f7;
    --color-link-hover: #c084fc;
    --btn-start: #7c3aed;
    --btn-start-hover: #8b5cf6;
    --btn-pause: #f59e0b;
    --btn-pause-hover: #fbbf24;
    --btn-stop: #ec4899;
    --btn-stop-hover: #f472b6;
    --btn-reset: #4c4270;
    --progress-gradient: linear-gradient(90deg, #7c3aed, #a855f7);
    --progress-over-gradient: linear-gradient(90deg, #ec4899, #f472b6);
    --card-border: 1px solid #7c3aed44;
    --card-radius: 16px;
    --font-display: 'Courier New', monospace;
    --glow-effect: 0 0 20px #7c3aed33;
    --scanline: none;
}

/* Retro Amber - レトロなアンバーCRT */
[data-theme="amber"] {
    --bg-primary: #0a0800;
    --bg-card: #1a1400;
    --bg-card-alt: #141000;
    --bg-badge: #2a2000;
    --bg-progress: #2a2000;
    --text-primary: #ffb000;
    --text-secondary: #cc8800;
    --text-muted: #996600;
    --color-elapsed: #ffcc00;
    --color-remaining: #ffb000;
    --color-overtime: #ff6600;
    --color-cost: #ffcc00;
    --color-estimate: #ffaa00;
    --color-link: #ffb000;
    --color-link-hover: #ffcc00;
    --btn-start: #aa8800;
    --btn-start-hover: #ccaa00;
    --btn-pause: #ff8800;
    --btn-pause-hover: #ffaa00;
    --btn-stop: #cc4400;
    --btn-stop-hover: #ff6600;
    --btn-reset: #554400;
    --progress-gradient: linear-gradient(90deg, #aa8800, #ffcc00);
    --progress-over-gradient: linear-gradient(90deg, #cc4400, #ff6600);
    --card-border: 1px solid #ffb00033;
    --card-radius: 0;
    --font-display: 'Courier New', monospace;
    --glow-effect: 0 0 8px #ffb00066;
    --scanline: repeating-linear-gradient(
        0deg,
        rgba(255, 176, 0, 0.03) 0px,
        rgba(255, 176, 0, 0.03) 1px,
        transparent 1px,
        transparent 2px
    );
}

/* Ocean Deep - 深海ブルー */
[data-theme="ocean"] {
    --bg-primary: #0a1628;
    --bg-card: #0f2744;
    --bg-card-alt: #0c1f38;
    --bg-badge: #1a3a5c;
    --bg-progress: #1a3a5c;
    --text-primary: #7dd3fc;
    --text-secondary: #38bdf8;
    --text-muted: #0ea5e9;
    --color-elapsed: #22d3ee;
    --color-remaining: #7dd3fc;
    --color-overtime: #f87171;
    --color-cost: #fde047;
    --color-estimate: #38bdf8;
    --color-link: #7dd3fc;
    --color-link-hover: #bae6fd;
    --btn-start: #0891b2;
    --btn-start-hover: #06b6d4;
    --btn-pause: #eab308;
    --btn-pause-hover: #facc15;
    --btn-stop: #dc2626;
    --btn-stop-hover: #ef4444;
    --btn-reset: #1e4976;
    --progress-gradient: linear-gradient(90deg, #0891b2, #22d3ee);
    --progress-over-gradient: linear-gradient(90deg, #dc2626, #f87171);
    --card-border: 1px solid #38bdf844;
    --card-radius: 12px;
    --font-display: 'Courier New', monospace;
    --glow-effect: 0 0 15px #38bdf822;
    --scanline: none;
}

/* Sunset - サンセットオレンジ */
[data-theme="sunset"] {
    --bg-primary: #1a0a0a;
    --bg-card: #2d1515;
    --bg-card-alt: #241010;
    --bg-badge: #4a2020;
    --bg-progress: #4a2020;
    --text-primary: #fcd34d;
    --text-secondary: #fb923c;
    --text-muted: #f97316;
    --color-elapsed: #4ade80;
    --color-remaining: #fcd34d;
    --color-overtime: #ef4444;
    --color-cost: #fcd34d;
    --color-estimate: #fb923c;
    --color-link: #fb923c;
    --color-link-hover: #fcd34d;
    --btn-start: #16a34a;
    --btn-start-hover: #22c55e;
    --btn-pause: #ea580c;
    --btn-pause-hover: #f97316;
    --btn-stop: #dc2626;
    --btn-stop-hover: #ef4444;
    --btn-reset: #78350f;
    --progress-gradient: linear-gradient(90deg, #f97316, #fcd34d);
    --progress-over-gradient: linear-gradient(90deg, #dc2626, #ef4444);
    --card-border: 1px solid #fb923c44;
    --card-radius: 8px;
    --font-display: 'Courier New', monospace;
    --glow-effect: 0 0 15px #fb923c33;
    --scanline: none;
}

/* ===== 共通基本スタイル ===== */
body.themed {
    background-color: var(--bg-primary);
    color: var(--text-primary);
    font-family: var(--font-display);
}

body.themed::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: var(--scanline);
    pointer-events: none;
    z-index: 9999;
}

/* テーマ選択UI */
.theme-selector {
    background: var(--bg-card);
    border: var(--card-border);
    color: var(--text-primary);
}

/* フォーム要素 */
.themed .form-select {
    background-color: var(--bg-input);
    color: var(--text-primary);
    border-color: var(--border-color);
}
.themed .form-select:focus {
    background-color: var(--bg-input);
    color: var(--text-primary);
    border-color: var(--accent-color);
    box-shadow: 0 0 0 0.25rem rgba(var(--accent-rgb), 0.25);
}
.themed .form-select option {
    background-color: var(--bg-card);
    color: var(--text-primary);
}

/* パンくずリスト */
.themed .breadcrumb {
    background: transparent;
}
.themed .breadcrumb-item a {
    color: var(--text-secondary);
}
.themed .breadcrumb-item a:hover {
    color: var(--text-primary);
}
.themed .breadcrumb-item.active {
    color: var(--text-muted);
}
.themed .breadcrumb-item + .breadcrumb-item::before {
    color: var(--text-muted);
}

/* リンク */
.themed a {
    color: var(--color-link);
}
.themed a:hover {
    color: var(--color-link-hover);
}

/* ===== テーマ専用エフェクト ===== */

/* Terminal Green テーマ */
[data-theme="terminal"] .stat-card,
[data-theme="terminal"] .timer-card {
    position: relative;
}
[data-theme="terminal"] .stat-card::before,
[data-theme="terminal"] .timer-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent, #00ff41, transparent);
    animation: scanline-move 2s linear infinite;
}
@keyframes scanline-move {
    0% { opacity: 0.3; }
    50% { opacity: 1; }
    100% { opacity: 0.3; }
}
[data-theme="terminal"] .breadcrumb {
    background: transparent;
    border-left: 2px solid #00ff41;
    padding-left: 10px;
}
[data-theme="terminal"] .breadcrumb-item.active {
    color: #00ff41;
}

/* NERV Orange テーマ */
[data-theme="nerv"] .stat-card,
[data-theme="nerv"] .timer-card {
    position: relative;
    clip-path: polygon(0 0, calc(100% - 10px) 0, 100% 10px, 100% 100%, 10px 100%, 0 calc(100% - 10px));
}
[data-theme="nerv"] .stat-label {
    text-transform: uppercase;
    letter-spacing: 2px;
    font-size: 0.75rem;
}
[data-theme="nerv"] .breadcrumb {
    background: transparent;
    border-left: 3px solid #ff6600;
    padding-left: 10px;
}
[data-theme="nerv"] h2::before {
    content: '>>> ';
    color: #ff6600;
}
@keyframes nerv-blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}
[data-theme="nerv"] .over-time,
[data-theme="nerv"] .blink {
    animation: nerv-blink 0.5s ease-in-out infinite;
}

/* Neon Cyber テーマ */
[data-theme="neon"] .stat-card,
[data-theme="neon"] .timer-card {
    position: relative;
    overflow: hidden;
}
[data-theme="neon"] .stat-card::before,
[data-theme="neon"] .timer-card::before {
    content: '';
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: linear-gradient(
        45deg,
        transparent 40%,
        rgba(255, 0, 255, 0.1) 45%,
        rgba(0, 255, 255, 0.1) 55%,
        transparent 60%
    );
    animation: neon-shine 3s linear infinite;
}
@keyframes neon-shine {
    0% { transform: translateX(-100%) rotate(45deg); }
    100% { transform: translateX(100%) rotate(45deg); }
}
[data-theme="neon"] .breadcrumb {
    background: linear-gradient(90deg, rgba(255,0,255,0.1), rgba(0,255,255,0.1));
    border-radius: 4px;
    padding: 8px 15px;
}
[data-theme="neon"] .cost-display,
[data-theme="neon"] .timer-display {
    text-shadow: 0 0 10px #ffff00, 0 0 20px #ffff0066;
}
[data-theme="neon"] .stat-value {
    text-shadow: 0 0 10px currentColor;
}

/* Pop Pink テーマ */
[data-theme="pink"] .stat-card,
[data-theme="pink"] .timer-card {
    box-shadow: 0 4px 15px rgba(255, 105, 180, 0.3);
}
[data-theme="pink"] .breadcrumb {
    background: linear-gradient(90deg, #ffe4ec, #ffd6e0);
    border-radius: 20px;
    padding: 8px 15px;
}
[data-theme="pink"] .btn {
    border-radius: 20px;
}
[data-theme="pink"] .participant-badge {
    background: linear-gradient(135deg, #ffb6c1, #ffc0cb);
    color: #d63384;
}
[data-theme="pink"] h2 {
    color: #ff69b4;
}

/* Pop Aqua テーマ */
[data-theme="aqua"] .stat-card,
[data-theme="aqua"] .timer-card {
    box-shadow: 0 4px 15px rgba(0, 206, 209, 0.3);
}
[data-theme="aqua"] .breadcrumb {
    background: linear-gradient(90deg, #e0ffff, #d0f0f0);
    border-radius: 20px;
    padding: 8px 15px;
}
[data-theme="aqua"] .btn {
    border-radius: 20px;
}
[data-theme="aqua"] .participant-badge {
    background: linear-gradient(135deg, #afeeee, #b0e0e6);
    color: #008b8b;
}
[data-theme="aqua"] h2 {
    color: #20b2aa;
}

/* Midnight Purple テーマ */
[data-theme="midnight"] .stat-card,
[data-theme="midnight"] .timer-card {
    box-shadow: 0 4px 20px rgba(124, 58, 237, 0.2);
}
[data-theme="midnight"] .breadcrumb {
    background: linear-gradient(90deg, rgba(124,58,237,0.2), rgba(168,85,247,0.1));
    border-radius: 8px;
    padding: 8px 15px;
}
[data-theme="midnight"] .cost-display,
[data-theme="midnight"] .timer-display {
    text-shadow: 0 0 15px #fbbf2466;
}

/* Retro Amber テーマ */
[data-theme="amber"] .stat-card,
[data-theme="amber"] .timer-card {
    position: relative;
}
[data-theme="amber"] .stat-card::before,
[data-theme="amber"] .timer-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: #ffb00066;
}
[data-theme="amber"] .breadcrumb {
    background: transparent;
    border-left: 2px solid #ffb000;
    padding-left: 10px;
}
[data-theme="amber"] .stat-label::before {
    content: '> ';
    color: #ffb00066;
}

/* Ocean Deep テーマ */
[data-theme="ocean"] .stat-card,
[data-theme="ocean"] .timer-card {
    position: relative;
    overflow: hidden;
}
[data-theme="ocean"] .stat-card::after,
[data-theme="ocean"] .timer-card::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, transparent, #38bdf8, transparent);
    opacity: 0.5;
}
[data-theme="ocean"] .breadcrumb {
    background: rgba(56, 189, 248, 0.1);
    border-radius: 8px;
    padding: 8px 15px;
}

/* Sunset テーマ */
[data-theme="sunset"] .stat-card,
[data-theme="sunset"] .timer-card {
    background: linear-gradient(180deg, var(--bg-card) 0%, rgba(249,115,22,0.1) 100%);
}
[data-theme="sunset"] .breadcrumb {
    background: linear-gradient(90deg, rgba(251,146,60,0.2), rgba(252,211,77,0.1));
    border-radius: 8px;
    padding: 8px 15px;
}
[data-theme="sunset"] .progress-elapsed {
    background: linear-gradient(90deg, #f97316, #fcd34d, #fef08a);
}
